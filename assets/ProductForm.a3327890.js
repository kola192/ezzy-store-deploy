import{d as F,aw as H,ax as O,D as h,h as f,a5 as T,H as X,bm as J,bn as K,bo as W,S as Y,aa as A,af as C,ag as I,ah as Q,ai as c,al as U,a as i,o as Z,ac as ee,as as N,aj as s,aq as E,ae as te,bp as $,am as L,I as ae,bq as le,ao as oe,an as se,br as re,bs as ne}from"./index.c2641ef6.js";import{j as ue,g as ie,b as ce,r as de,Q as me}from"./database.654f3bcd.js";import{Q as pe}from"./QForm.d7ca857d.js";import{_ as be}from"./plugin-vue_export-helper.21dcd24c.js";var P=F({name:"QBreadcrumbsEl",props:{...H,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(t,{slots:d}){const{linkTag:r,linkAttrs:m,linkClass:u,navigateOnClick:_}=O(),p=h(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(t.disable!==!0?"q-link--focusable"+u.value:"q-breadcrumbs__el--disable"),...m.value,onClick:_})),b=h(()=>"q-breadcrumbs__el-icon"+(t.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const l=[];return t.icon!==void 0&&l.push(f(T,{class:b.value,name:t.icon})),t.label!==void 0&&l.push(t.label),f(r.value,{...p.value},X(d.default,l))}}});const ge=["",!0];var ve=F({name:"QBreadcrumbs",props:{...J,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:t=>["none","xs","sm","md","lg","xl"].includes(t),default:"sm"}},setup(t,{slots:d}){const r=K(t),m=h(()=>`flex items-center ${r.value}${t.gutter==="none"?"":` q-gutter-${t.gutter}`}`),u=h(()=>t.separatorColor?` text-${t.separatorColor}`:""),_=h(()=>` text-${t.activeColor}`);return()=>{const p=W(Y(d.default));if(p.length===0)return;let b=1;const l=[],S=p.filter(n=>n.type!==void 0&&n.type.name==="QBreadcrumbsEl").length,w=d.separator!==void 0?d.separator:()=>t.separator;return p.forEach(n=>{if(n.type!==void 0&&n.type.name==="QBreadcrumbsEl"){const y=b<S,g=n.props!==null&&ge.includes(n.props.disable),x=(y===!0?"":" q-breadcrumbs--last")+(g!==!0&&y===!0?_.value:"");b++,l.push(f("div",{class:`flex items-center${x}`},[n])),y===!0&&l.push(f("div",{class:"q-breadcrumbs__separator"+u.value},w()))}else l.push(n)}),f("div",{class:"q-breadcrumbs"},[f("div",{class:m.value},l)])}}});const Fe=A({__name:"AppBreadCrumbs",props:{pageName:null,middleLink:null},setup(t){return(d,r)=>(C(),I(ve,{class:"text-grey-9 q-mb-lg q-px-md","active-color":"teal-8"},{separator:Q(()=>[c(T,{size:"1.2em",name:"arrow_forward",color:"grey-6"})]),default:Q(()=>[c(P,{label:"Products",to:"/"}),t.middleLink?(C(),I(P,{key:0,label:t.middleLink,to:`/${t.middleLink}`},null,8,["label","to"])):U("",!0),c(P,{label:t.pageName},null,8,["label"])]),_:1}))}});const v=t=>(re("data-v-1ae2eb41"),t=t(),ne(),t),_e={class:"form-wrapper q-my-xl q-mx-md q-pa-lg"},fe={style:{margin:"0","margin-bottom":"1rem"},class:"text-center text-white"},he={class:"inner-container q-pa-sm"},ye={class:"q-pa-md q-pt-lg",style:{"max-width":"400px","margin-inline":"auto",overflow:"hidden"}},xe={class:"input-margin product-image-container"},ke=v(()=>s("label",null,"Product image",-1)),qe={key:0},Ce=v(()=>s("label",{style:{"font-size":"0.8rem","margin-inline-end":"0.5rem"}},"Image name",-1)),Se={for:"extlab"},we=v(()=>s("br",null,null,-1)),Ve=v(()=>s("br",null,null,-1)),Pe=["src"],Qe=v(()=>s("label",{id:"upprogress"},null,-1)),Re=v(()=>s("br",null,null,-1)),Be=v(()=>s("br",null,null,-1)),Ie=A({__name:"ProductForm",props:{product:null},emits:["onSubmit"],setup(t,{emit:d}){const r=t,m=i([]),u=i(""),_=i(),p=i(),b=i(),l=i({id:"",product_category:"",product_image:"",product_name:"",product_price:null}),S=async()=>{if(!k.value)return se.create({message:"Please select product image",position:"bottom",color:"pink"});let o={};o.product={...l.value},r.product&&(o.docId=r.product.id),delete o.product.id,o.product.product_category=u.value,o.file=g[0],o.fname=l.value.product_name+B.value,console.log({data:o}),d("onSubmit",o),w()},w=()=>{l.value.product_name="",l.value.product_category="",l.value.product_image="",u.value="",_.value.resetValidation(),p.value.resetValidation(),b.value.resetValidation()};Z(async()=>{if(r.product){l.value=r.product;const a=r.product.product_image;if(a){const e=a.split("/"),q=e[e.length-1];G(q)}}const o=await ue();m.value=o.map(a=>a.category_name),r.product?u.value=m.value.filter(a=>{var e;return a==((e=r.product)==null?void 0:e.product_category)})[0]:u.value=m.value[0]});const n=ee(),y=h(()=>n.fullPath=="/add-new-product"?"Add new product":"Edit product");let g=[];const x=new FileReader,z=i(""),R=i(""),B=i(""),k=i(),V=document.createElement("input");V.type="file",V.onchange=o=>{g=o.target.files;const a=M(g[0]);B.value=a;const e=j(g[0]);z.value=e,R.value=a,x.readAsDataURL(g[0])},x.onload=function(){k.value=x.result};const D=()=>{V.click()},M=o=>{const a=o.name.split("."),e=a.slice(a.length-1,a.length);return"."+e[0]},j=o=>o.name.split(".").slice(0,-1).join("."),G=o=>{const a=ie();ce(de(a,`products/${o}`)).then(e=>{const q=new XMLHttpRequest;q.responseType="blob",q.open("GET",e),q.send(),k.value=e}).catch(e=>{console.error({error:e})})};return(o,a)=>(C(),N("div",_e,[s("h6",fe,E(te(y)),1),s("div",he,[s("div",ye,[c(pe,{onSubmit:oe(S,["prevent"]),class:"q-gutter-md form"},{default:Q(()=>[c($,{ref_key:"productNameRef",ref:_,class:"input-margin",filled:"",modelValue:l.value.product_name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.product_name=e),autocomplete:"off",label:"Product name",hint:"This name will be use in search",color:"grey-8","lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},null,8,["modelValue","rules"]),c($,{ref_key:"productPriceRef",ref:p,class:"input-margin",filled:"",type:"number",modelValue:l.value.product_price,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.product_price=e),autocomplete:"off",label:"Product price",color:"grey-8","lazy-rules":"",rules:[e=>e&&e>0||"This field is required"]},null,8,["modelValue","rules"]),c(me,{ref_key:"productCategoryRef",ref:b,filled:"",modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),options:m.value,label:"Product Category",class:"input-margin",style:{"margin-bottom":"2rem"}},null,8,["modelValue","options"]),s("div",xe,[ke,c(L,{outline:"",color:"primary",label:"Select image",class:"submit-btn q-my-md",onClick:D}),k.value?(C(),N("div",qe,[Ce,ae(s("input",{type:"text",disabled:"","onUpdate:modelValue":a[3]||(a[3]=e=>l.value.product_name=e)},null,512),[[le,l.value.product_name]]),s("label",Se,E(R.value),1),we,Ve,s("img",{id:"productImg",src:k.value},null,8,Pe),Qe,Re,Be])):U("",!0)]),c(L,{color:"positive",label:"Submit",type:"submit",class:"submit-btn"})]),_:1},8,["onSubmit"])])])]))}});var Te=be(Ie,[["__scopeId","data-v-1ae2eb41"]]);export{Te as P,Fe as _};
